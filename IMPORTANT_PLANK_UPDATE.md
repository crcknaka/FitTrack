# ‚ö†Ô∏è –í–ê–ñ–ù–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï: –ü–ª–∞–Ω–∫–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–Ω—å—à–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø–ª–∞–Ω–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –ø–æ–ª–µ `duration_minutes`, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –∫–∞—Ä–¥–∏–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (–±–µ–≥). –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö**.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `plank_seconds` —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (–ø–ª–∞–Ω–∫–∞).

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase

–û—Ç–∫—Ä–æ–π—Ç–µ [APPLY_MIGRATIONS_NOW.md](APPLY_MIGRATIONS_NOW.md) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∫–æ–¥ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–®–∞–≥ 3".

**–ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ—Ç—Å—é–¥–∞:**

```sql
-- ============================================
-- –ü–û–õ–ù–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø –î–õ–Ø –î–û–ë–ê–í–õ–ï–ù–ò–Ø –¢–ò–ü–ê "TIMED"
-- –ò –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø "–ü–õ–ê–ù–ö–ê" (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)
-- ============================================

-- –®–ê–ì 1: –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –ø–æ–ª–µ plank_seconds –≤ —Ç–∞–±–ª–∏—Ü—É workout_sets
ALTER TABLE public.workout_sets
ADD COLUMN IF NOT EXISTS plank_seconds integer;

-- –®–ê–ì 2: –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
COMMENT ON COLUMN public.workout_sets.plank_seconds IS '–í—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Ç–∏–ø–∞ timed (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–∞–Ω–∫–∞)';

-- –®–ê–ì 3: –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–∏–ø —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 'timed'
DO $$
BEGIN
    IF NOT EXISTS (
        SELECT 1 FROM pg_enum
        WHERE enumlabel = 'timed'
        AND enumtypid = (SELECT oid FROM pg_type WHERE typname = 'exercise_type')
    ) THEN
        ALTER TYPE exercise_type ADD VALUE 'timed';
    END IF;
END $$;

-- –®–ê–ì 4: –î–æ–±–∞–≤–ª—è–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ "–ü–ª–∞–Ω–∫–∞" (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç)
INSERT INTO public.exercises (name, type, is_preset, image_url)
SELECT '–ü–ª–∞–Ω–∫–∞', 'timed'::exercise_type, true, '/exercises/planka.jpg'
WHERE NOT EXISTS (
  SELECT 1 FROM public.exercises WHERE name = '–ü–ª–∞–Ω–∫–∞' AND is_preset = true
);
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π: **Ctrl+Shift+R** (Windows) –∏–ª–∏ **Cmd+Shift+R** (Mac)

---

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ù–æ–≤–æ–µ –ø–æ–ª–µ:** `workout_sets.plank_seconds` (integer, nullable)
- **–î–ª—è –ø–ª–∞–Ω–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `plank_seconds`
- **–î–ª—è –±–µ–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `duration_minutes`
- –ù–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤! ‚úÖ

### TypeScript —Ç–∏–ø—ã
- [src/integrations/supabase/types.ts](src/integrations/supabase/types.ts) - –¥–æ–±–∞–≤–ª–µ–Ω–æ `plank_seconds`
- [src/hooks/useWorkouts.ts](src/hooks/useWorkouts.ts) - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –º—É—Ç–∞—Ü–∏–∏

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [src/pages/WorkoutDetail.tsx](src/pages/WorkoutDetail.tsx):
  - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–¥—Ö–æ–¥–∞ –ø–ª–∞–Ω–∫–∏: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `plank_seconds`
  - –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `plank_seconds`
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `set.plank_seconds`

- [src/pages/Progress.tsx](src/pages/Progress.tsx):
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ "–û–±—â–µ–µ –≤—Ä–µ–º—è": —Å—á–∏—Ç–∞–µ—Ç `totalPlankSeconds`
  - –ì—Ä–∞—Ñ–∏–∫: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `plankTime` –≤–º–µ—Å—Ç–æ `duration`

- [src/pages/CalendarPage.tsx](src/pages/CalendarPage.tsx):
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `totalPlankSeconds`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

1. –ó–∞–π–¥–∏ –≤ **Workouts** ‚Üí –≤—ã–±–µ—Ä–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
2. –î–æ–±–∞–≤—å –ø–æ–¥—Ö–æ–¥ **–ü–ª–∞–Ω–∫–∞** —Å –≤—Ä–µ–º–µ–Ω–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 —Å–µ–∫—É–Ω–¥)
3. –ü–æ–¥—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è ‚úÖ
4. –í **Progress** –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ "–û–±—â–µ–µ –≤—Ä–µ–º—è (—Å–µ–∫)" ‚úÖ
5. –í **Calendar** –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö ‚úÖ

---

## üìÅ –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π

- [supabase/FINAL_MIGRATION_TIMED_FIXED.sql](supabase/FINAL_MIGRATION_TIMED_FIXED.sql) - –ü–æ–ª–Ω—ã–π SQL —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- [APPLY_MIGRATIONS_NOW.md](APPLY_MIGRATIONS_NOW.md) - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [supabase/CHECK_DATABASE.sql](supabase/CHECK_DATABASE.sql) - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î

---

## üéØ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å:
- **–ü–ª–∞–Ω–∫–∞** ‚Üí `plank_seconds` (—Å–µ–∫—É–Ω–¥—ã)
- **–ë–µ–≥** ‚Üí `duration_minutes` (–º–∏–Ω—É—Ç—ã)
- **–ù–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤!** üéâ
