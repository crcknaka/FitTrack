# Миграция: Добавление упражнения "Планка" с типом "timed"

## Описание изменений

Добавлен новый тип упражнения `"timed"` (на время) для упражнений, где нужно отслеживать время выполнения в секундах вместо повторений. Первое упражнение этого типа - **Планка**.

## Применение миграций к базе данных

### Вариант 1: Через Supabase Dashboard (Рекомендуется)

1. Перейдите в Supabase Dashboard → SQL Editor
2. Выполните следующие SQL команды по порядку:

**Миграция 1: Добавление типа 'timed'**
```sql
ALTER TYPE exercise_type ADD VALUE IF NOT EXISTS 'timed';
```

**Миграция 2: Добавление упражнения "Планка"**
```sql
INSERT INTO public.exercises (name, type, is_preset, image_url)
SELECT 'Планка', 'timed'::exercise_type, true, '/exercises/planka.jpg'
WHERE NOT EXISTS (
  SELECT 1 FROM public.exercises WHERE name = 'Планка' AND is_preset = true
);
```

### Вариант 2: Через Supabase CLI

Если у вас настроен Supabase CLI:

```bash
# Примените миграции
npx supabase db push
```

## Изображение для упражнения

Убедитесь, что файл `planka.jpg` загружен в Supabase Storage по пути `/exercises/planka.jpg`.

## Что изменилось в коде

### 1. Типы TypeScript
- Обновлены интерфейсы в `src/integrations/supabase/types.ts`
- Обновлены интерфейсы в `src/hooks/useExercises.ts` и `src/hooks/useWorkouts.ts`

### 2. UI Компоненты

#### WorkoutDetail (`src/pages/WorkoutDetail.tsx`)
- Добавлен ввод времени в секундах для упражнений типа "timed"
- Отображение времени в секундах вместо повторений
- Фильтр типов упражнений включает "На время"

#### Progress (`src/pages/Progress.tsx`)
- Карточка статистики "Общее время (сек)" для временных упражнений
- График времени для временных упражнений
- Скрыты неактуальные карточки (повторения, вес) для временных упражнений

#### CalendarPage (`src/pages/CalendarPage.tsx`)
- Отображение времени в секундах для временных упражнений
- Иконка Activity для временных упражнений

#### Exercises (`src/pages/Exercises.tsx`)
- Добавлен тип "На время (секунды)" в селекторы
- Обновлено отображение карточек упражнений

## Как использовать

1. После применения миграций, упражнение "Планка" появится в списке упражнений
2. При добавлении подхода для планки, вместо "Повторения" и "Вес" будет поле "Время (сек)"
3. В статистике (Progress) будет показываться общее время в секундах
4. В календаре будет отображаться время выполнения

## Формат хранения данных

- Время хранится в поле `duration_minutes` таблицы `workout_sets`
- Для упражнений типа "timed" это поле содержит **секунды** (не минуты)
- Поле `reps` остается `null` для временных упражнений
